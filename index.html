<!DOCTYPE html>
<html>
<head>
    <title>My WhatsApp Clone</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="font-family: Arial; background: #e5ddd5; padding: 20px;">

    <h2>WhatsApp Clone</h2>
    <div id="chat-box" style="height: 300px; background: white; border-radius: 10px; padding: 15px; overflow-y: scroll; border: 1px solid #ccc; margin-bottom: 10px;"></div>
    
    <input type="text" id="msgInput" placeholder="Type a message..." style="width: 70%; padding: 10px;">
    <button onclick="send()" style="padding: 10px; background: #25d366; color: white; border: none; cursor: pointer; border-radius: 5px;">Send</button>

    <script>
        // These are your unique keys from your Supabase dashboard
        const URL = 'https://dgrdilmeeeejsjxwyzcf.supabase.co'; 
        const KEY = 'sb_publishable_yvI1lQEmFmcOAc8QuEQlLA_TpM306Zv';
        const _supabase = supabase.createClient(URL, KEY);

        // This makes messages appear instantly (Realtime)
        _supabase.channel('messages').on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'messages' }, payload => {
            const chat = document.getElementById('chat-box');
            chat.innerHTML += `<p><strong>${payload.new.sender}:</strong> ${payload.new.content}</p>`;
            chat.scrollTop = chat.scrollHeight;
        }).subscribe();

        // This sends your message to the Supabase table
        async function send() {
            const input = document.getElementById('msgInput');
            if (input.value === "") return;
            
            await _supabase.from('messages').insert([
                { content: input.value, sender: 'Me' }
            ]);
            input.value = '';
        }
    </script>
</body>
</html>
<input type="text" id="userName" placeholder="Your Name" style="width: 25%; padding: 10px; margin-bottom: 5px;">
<br>
<input type="text" id="msgInput" placeholder="Type a message..." style="width: 70%; padding: 10px;">
